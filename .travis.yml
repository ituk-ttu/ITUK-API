os: linux

language: java
jdk: openjdk11

notifications:
  slack: ituk-dev:sRNXjpzecEiwpjNFsnHTf2bj

branches:
  only:
    - master
    - develop

addons:
  ssh_known_hosts: ituk.ee

script:
  - ./gradlew build

deploy:
  - provider: script
    skip_cleanup: true
    script: bash scripts/deploy-master.sh
    on:
      branch: master
  - provider: script
    skip_cleanup: true
    script: script/deploy-staging.sh
    on:
      branch: staging
